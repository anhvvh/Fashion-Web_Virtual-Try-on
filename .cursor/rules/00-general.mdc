---
description: General project rules
alwaysApply: true
---
# Project structure
.cursor/: stores automation rules and commands.
  - rules/: development rules.
  - commands/: automation commands.
backend/: backend API server.
  - src/
    - config/: configuration files (env, supabase, constants).
    - controllers/: request handlers (validate input, parse request, send response).
      - auth_controller.js: authentication controller (register, login).
      - profile_controller.js: profile controller (getProfile, updateProfile).
    - services/: business logic layer.
      - auth_service.js: authentication service (register, login).
      - profile_service.js: profile service (getProfile, updateProfile with image upload).
    - repositories/: database access layer (Supabase client/SQL).
      - profile_repository.js: profile repository (findByEmail, findById, create, update).
    - middlewares/: auth, error handling, validation.
      - auth.js: JWT authentication middleware.
      - is_admin.js: admin role authorization middleware.
      - error_handler.js: error handling middleware.
      - validation.js: request validation middleware.
      - upload.js: multer middleware for file uploads.
    - routes/: API route definitions.
      - index.js: main routes file.
      - auth_routes.js: authentication routes.
      - user_routes.js: user profile routes (GET/PUT /api/user/profile).
    - utils/: utility functions (errors, response helpers).
      - app_error.js: custom error classes.
      - response.js: response helpers.
  - package.json: backend dependencies and scripts.
  - .env.example: environment variables template.
frontend/: React frontend application.
  - src/
    - components/: reusable UI components.
      - Header.jsx: landing page header with logo and navigation.
      - Hero.jsx: landing page hero section.
      - Features.jsx: landing page features section.
      - Footer.jsx: landing page footer.
      - ProtectedRoute.jsx: protected route wrapper component.
    - pages/: route page components.
      - LandingPage.jsx: main landing page.
      - RegisterPage.jsx: user registration page.
      - LoginPage.jsx: user login page.
      - ProfilePage.jsx: user profile page with update form and image upload.
    - features/: feature-based modules.
    - services/: API service definitions.
      - api.js: API service definitions.
      - auth.js: authentication service (register, login).
      - profile.js: profile service (getProfile, updateProfile).
    - hooks/: custom React hooks.
    - utils/: utility functions (cn, formatters, etc.).
      - cn.js: className utility function.
    - assets/: static assets (images, fonts, etc.).
    - App.jsx: main app component with routing.
    - main.jsx: app entry point.
    - index.css: global styles.
  - package.json: frontend dependencies and scripts.
  - vite.config.js: Vite configuration.
  - .env.example: environment variables template.
README.md: project documentation.
.gitignore: git ignore file.
common_errors.md: common errors and solutions documentation.
sprints/: user stories and sprint backlog (US-01.md, US-02.md, US-03.md, US-04.md, sprint1.md, sprint2.md, PB.md).
design/: database schema and flow design documentation.
  - schema-sprint1.md: database schema design for Sprint 1.
  - schema-sprint2.md: database schema design for Sprint 2 (categories, products).
  - rls-policies-guide.md: Row Level Security (RLS) policies guide for profiles table.
  - rls-catalog-policies-guide.md: RLS policies guide for categories and products tables.
  - 1.1-user-registration-flow.md: user registration flow diagram.
  - 1.2-user-login-flow.md: user login flow diagram.
  - 1.3-profile-get-update-flow.md: profile get/update flow diagram.
  - 1.4-logout-protected-routes-flow.md: logout and protected routes flow diagram.
migrations/: SQL migration scripts for database.
  - 001_create_profiles_table.sql: create profiles table migration.
  - 002_create_storage_bucket.sql: create storage bucket migration.
  - 003_seed_sample_data.sql: seed sample data for development.
  - 004_enable_rls_profiles.sql: enable RLS and create policies for profiles table.
  - 005_create_categories_table.sql: create categories table migration (Sprint 2).
  - 006_create_products_table.sql: create products table migration (Sprint 2).
  - 007_create_product_images_bucket.sql: create product-images storage bucket (Sprint 2).
  - 008_seed_catalog_data.sql: seed sample categories and products data (Sprint 2).
  - 009_enable_rls_catalog.sql: enable RLS and create policies for categories and products (Sprint 2).
  - 010_add_role_to_profiles.sql: add role column to profiles table (Sprint 2).
  - 011_seed_admin_user.sql: seed admin user for testing (Sprint 2).
  - README.md: migration guide and instructions.
PB.md: product backlog.

=> Always use the structure above to understand the project when writing code. 
=> When creating new files or folders, place them in the appropriate location according to this structure. 
=> Always update this structure whenever creating or deleting any folder or file.

# Project tech stacks.
Keep in mind that the project is built with the following tech stack:
  - Backend: NodeJS + ExpressJS
  - Frontend: ReactJS + Vite + TailwindCSS
  - Database & Storage: Supabase
  - Authentication: JWT
  - Do not use Prisma, use Supabase directly for schema and CRUD.
  - Do not use the default Users table of Supabase, create a `profiles` table.
# Humor
- Include a dad joke in every reply to the user.
